<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weekly Review - Focus & Wellness Coach</title>
    <link rel="stylesheet" href="common.css">
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <span class="brand-icon">üéØ</span>
                <span class="brand-text">Focus & Wellness</span>
            </div>
            <div class="nav-links">
                <a href="dashboard.html" class="nav-link">Dashboard</a>
                <a href="planner.html" class="nav-link">Planner</a>
                <a href="timer.html" class="nav-link">Active Block</a>
                <a href="breaks.html" class="nav-link">Breaks</a>
                <a href="review.html" class="nav-link active">Review</a>
            </div>
            <div class="nav-user">
                <span class="user-name" id="userName">User</span>
                <button class="btn-logout" id="logoutBtn">Logout</button>
            </div>
        </div>
    </nav>

    <div class="container">
        <header class="page-header">
            <div>
                <h1>Weekly Review</h1>
                <p class="page-subtitle">Comprehensive analysis of your productivity and wellness</p>
            </div>
            <button class="btn-secondary" id="exportCSVBtn">
                <span>üì•</span> Export CSV
            </button>
        </header>

        <div class="review-grid">
            <div class="card metric-card">
                <div class="metric-header">
                    <div class="metric-icon focus">‚è±Ô∏è</div>
                    <h3>Total Focus Time</h3>
                </div>
                <div class="metric-value" id="weekFocusTime">0h 0m</div>
                <div class="metric-footer">
                    <span class="metric-label">Blocks Completed:</span>
                    <span class="metric-data" id="weekBlocks">0</span>
                </div>
            </div>

            <div class="card metric-card">
                <div class="metric-header">
                    <div class="metric-icon compliance">‚úì</div>
                    <h3>Compliance Rate</h3>
                </div>
                <div class="metric-value" id="weekCompliance">100%</div>
                <div class="metric-footer">
                    <span class="metric-label">Protocols Completed:</span>
                    <span class="metric-data" id="weekProtocols">0</span>
                </div>
            </div>

            <div class="card metric-card">
                <div class="metric-header">
                    <div class="metric-icon breaks">‚òï</div>
                    <h3>Breaks Taken</h3>
                </div>
                <div class="metric-value" id="weekBreaks">0</div>
                <div class="metric-footer">
                    <span class="metric-label">Average Duration:</span>
                    <span class="metric-data" id="avgBreakDuration">0 min</span>
                </div>
            </div>

            <div class="card metric-card">
                <div class="metric-header">
                    <div class="metric-icon debt">üìä</div>
                    <h3>Debt Management</h3>
                </div>
                <div class="metric-value" id="netDebt">0</div>
                <div class="metric-footer">
                    <span class="metric-label">Cleared / Created:</span>
                    <span class="metric-data"><span id="weekDebtsCleared">0</span> / <span id="weekDebtsCreated">0</span></span>
                </div>
            </div>

            <div class="card chart-card">
                <div class="card-header">
                    <h2>Focus Distribution</h2>
                </div>
                <div class="block-distribution" id="blockDistribution">
                    <div class="distribution-item">
                        <span class="distribution-label">25-min blocks</span>
                        <div class="distribution-bar">
                            <div class="distribution-fill" style="width: 0%" id="dist25"></div>
                        </div>
                        <span class="distribution-count" id="count25">0</span>
                    </div>
                    <div class="distribution-item">
                        <span class="distribution-label">50-min blocks</span>
                        <div class="distribution-bar">
                            <div class="distribution-fill" style="width: 0%" id="dist50"></div>
                        </div>
                        <span class="distribution-count" id="count50">0</span>
                    </div>
                    <div class="distribution-item">
                        <span class="distribution-label">90-min blocks</span>
                        <div class="distribution-bar">
                            <div class="distribution-fill" style="width: 0%" id="dist90"></div>
                        </div>
                        <span class="distribution-count" id="count90">0</span>
                    </div>
                </div>
            </div>

            <div class="card insights-card">
                <div class="card-header">
                    <h2>Key Insights</h2>
                </div>
                <div class="insights-list" id="insightsList">
                    <div class="insight-item">
                        <span class="insight-icon">üí°</span>
                        <p>Average block length: <strong id="avgBlockLength">0 min</strong></p>
                    </div>
                    <div class="insight-item">
                        <span class="insight-icon">üéØ</span>
                        <p>Most productive block size: <strong id="bestBlockSize">N/A</strong></p>
                    </div>
                    <div class="insight-item">
                        <span class="insight-icon">‚ö†Ô∏è</span>
                        <p>Fatigue flags triggered: <strong id="weekFatigueFlags">0</strong></p>
                    </div>
                    <div class="insight-item">
                        <span class="insight-icon">üìà</span>
                        <p>Weekly trend: <strong id="weeklyTrend">Stable</strong></p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="toast" id="toast"></div>
    <script src="common.js"></script>
    <script src="review.js"></script>
</body>
</html>
