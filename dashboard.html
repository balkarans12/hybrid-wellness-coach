<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Focus & Wellness Coach</title>
    <link rel="stylesheet" href="common.css">
    <link rel="stylesheet" href="dashboard.css">
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <span class="brand-icon">üéØ</span>
                <span class="brand-text">Focus & Wellness</span>
            </div>
            <div class="nav-links">
                <a href="dashboard.html" class="nav-link active">Dashboard</a>
                <a href="planner.html" class="nav-link">Planner</a>
                <a href="timer.html" class="nav-link">Active Block</a>
                <a href="breaks.html" class="nav-link">Breaks</a>
                <a href="review.html" class="nav-link">Review</a>
            </div>
            <div class="nav-user">
                <span class="user-name" id="userName">User</span>
                <button class="btn-logout" id="logoutBtn">Logout</button>
            </div>
        </div>
    </nav>

    <div class="dashboard-wrapper">
        <div class="dashboard-container">
            <!-- Page Header -->
            <div class="dashboard-header">
                <div class="header-content">
                    <h1 class="page-title">Dashboard Overview</h1>
                    <p class="page-date" id="currentDate"></p>
                </div>
            </div>

            <!-- Alert Section (Top Priority) -->
            <div class="alert-section">
                <div class="alert-card fatigue-alert" id="fatigueFlag" style="display: none;">
                    <div class="alert-icon-wrapper">
                        <span class="alert-icon">üö®</span>
                    </div>
                    <div class="alert-content">
                        <h3>Critical Fatigue Alert</h3>
                        <p>Your recovery debt has reached critical levels (‚â•5). Please take an extended break immediately to restore wellness.</p>
                        <button class="btn-alert" onclick="window.location.href='breaks.html'">Log Break Now</button>
                    </div>
                </div>

                <div class="alert-card conservative-alert" id="conservativeAlert" style="display: none;">
                    <div class="alert-icon-wrapper">
                        <span class="alert-icon">‚ö†Ô∏è</span>
                    </div>
                    <div class="alert-content">
                        <h3>Conservative Mode Active</h3>
                        <p id="conservativeMessage"></p>
                    </div>
                </div>
            </div>

            <!-- Main Grid Layout -->
            <div class="dashboard-grid">
                
                <!-- Left Column: Primary Metrics -->
                <div class="grid-column-left">
                    
                    <!-- Recovery Debt Card -->
                    <div class="metric-card debt-card">
                        <div class="card-header-row">
                            <div class="card-title-group">
                                <h2 class="card-title">Recovery Debt</h2>
                                <p class="card-subtitle">Current debt levels by category</p>
                            </div>
                            <span class="status-badge" id="debtBadge">Low Risk</span>
                        </div>

                        <div class="debt-grid-layout">
                            <div class="debt-metric-item eye-metric">
                                <div class="debt-icon-circle">üëÅÔ∏è</div>
                                <div class="debt-details">
                                    <span class="debt-label">Eye Health</span>
                                    <span class="debt-number" id="eyeDebt">0</span>
                                </div>
                            </div>

                            <div class="debt-metric-item hydration-metric">
                                <div class="debt-icon-circle">üíß</div>
                                <div class="debt-details">
                                    <span class="debt-label">Hydration</span>
                                    <span class="debt-number" id="hydrationDebt">0</span>
                                </div>
                            </div>

                            <div class="debt-metric-item mobility-metric">
                                <div class="debt-icon-circle">üèÉ</div>
                                <div class="debt-details">
                                    <span class="debt-label">Mobility</span>
                                    <span class="debt-number" id="mobilityDebt">0</span>
                                </div>
                            </div>

                            <div class="debt-metric-item posture-metric">
                                <div class="debt-icon-circle">ü™ë</div>
                                <div class="debt-details">
                                    <span class="debt-label">Posture</span>
                                    <span class="debt-number" id="postureDebt">0</span>
                                </div>
                            </div>
                        </div>

                        <div class="total-debt-section">
                            <div class="total-debt-label">
                                <span>Total Daily Debt</span>
                                <span class="total-debt-value" id="totalDebt">0</span>
                            </div>
                            <div class="debt-progress-bar">
                                <div class="debt-progress-fill" id="debtProgressFill"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Today's Stats Card -->
                    <div class="metric-card stats-summary-card">
                        <div class="card-header-row">
                            <h2 class="card-title">Today's Activity</h2>
                        </div>
                        
                        <div class="stats-grid">
                            <div class="stat-box">
                                <div class="stat-icon-wrapper focus-icon">
                                    <span>‚è±Ô∏è</span>
                                </div>
                                <div class="stat-info">
                                    <span class="stat-value" id="focusTime">0h 0m</span>
                                    <span class="stat-label">Focus Time</span>
                                </div>
                            </div>

                            <div class="stat-box">
                                <div class="stat-icon-wrapper blocks-icon">
                                    <span>‚úÖ</span>
                                </div>
                                <div class="stat-info">
                                    <span class="stat-value" id="blocksCompleted">0</span>
                                    <span class="stat-label">Blocks Done</span>
                                </div>
                            </div>

                            <div class="stat-box">
                                <div class="stat-icon-wrapper breaks-icon">
                                    <span>‚òï</span>
                                </div>
                                <div class="stat-info">
                                    <span class="stat-value" id="breaksTaken">0</span>
                                    <span class="stat-label">Breaks Taken</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Right Column: Compliance & Actions -->
                <div class="grid-column-right">
                    
                    <!-- Compliance Card -->
                    <div class="metric-card compliance-card">
                        <div class="card-header-row">
                            <h2 class="card-title">Protocol Compliance</h2>
                        </div>

                        <div class="compliance-visual">
                            <svg class="compliance-svg" viewBox="0 0 200 200">
                                <circle cx="100" cy="100" r="85" class="compliance-track"></circle>
                                <circle cx="100" cy="100" r="85" class="compliance-indicator" id="complianceCircle"></circle>
                            </svg>
                            <div class="compliance-center-text">
                                <div class="compliance-percentage" id="complianceText">100%</div>
                                <div class="compliance-label">Adherence</div>
                            </div>
                        </div>

                        <div class="compliance-breakdown">
                            <div class="breakdown-item completed">
                                <span class="breakdown-dot"></span>
                                <span class="breakdown-label">Completed</span>
                                <span class="breakdown-value" id="protocolsCompleted">0</span>
                            </div>
                            <div class="breakdown-item skipped">
                                <span class="breakdown-dot"></span>
                                <span class="breakdown-label">Skipped</span>
                                <span class="breakdown-value" id="protocolsSkipped">0</span>
                            </div>
                        </div>
                    </div>

                    <!-- Quick Actions Card -->
                    <div class="metric-card actions-card">
                        <div class="card-header-row">
                            <h2 class="card-title">Quick Actions</h2>
                        </div>
                        
                        <div class="actions-list">
                            <a href="planner.html" class="action-button primary-action">
                                <div class="action-icon">üìÖ</div>
                                <div class="action-text">
                                    <span class="action-title">Create Focus Block</span>
                                    <span class="action-desc">Schedule a new work session</span>
                                </div>
                                <span class="action-arrow">‚Üí</span>
                            </a>

                            <a href="breaks.html" class="action-button secondary-action">
                                <div class="action-icon">üåø</div>
                                <div class="action-text">
                                    <span class="action-title">Log Break</span>
                                    <span class="action-desc">Clear recovery debt</span>
                                </div>
                                <span class="action-arrow">‚Üí</span>
                            </a>

                            <a href="review.html" class="action-button tertiary-action">
                                <div class="action-icon">üìä</div>
                                <div class="action-text">
                                    <span class="action-title">Weekly Review</span>
                                    <span class="action-desc">View detailed analytics</span>
                                </div>
                                <span class="action-arrow">‚Üí</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="toast" id="toast"></div>
    <script src="common.js"></script>
    <script src="dashboard.js"></script>
</body>
</html>
